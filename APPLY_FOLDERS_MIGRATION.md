# üìÅ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –ø–∞–ø–æ–∫

## ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!**

### **–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

## **1. üîß –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç**

### **–ü—Ä–æ–±–ª–µ–º–∞:**
- ‚ùå –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–∞–ø–∫–∏
- ‚ùå –¢–∞–±–ª–∏—Ü–∞ `folders` –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### **–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ **Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** –µ—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫** –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏

## **2. üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:**

### **–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ `folders` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

### **–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ `folders` –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫** –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç** –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
- ‚ö†Ô∏è **–ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏

## **3. üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:**

### **–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ:**
```javascript
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–∞–ø–∫–∏:
Creating folder: –ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏

// –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
Folders table not found, using empty array
Folders table does not exist, creating folder locally

// –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏:
Folder created successfully: {id: "...", name: "...", ...}
```

## **4. üóÑÔ∏è –î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:**

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Supabase Dashboard**
1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ —Ñ–∞–π–ª–∞ `supabase/migrations/20250115000000_create_folders_table.sql`

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Supabase CLI**
```bash
# –ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Supabase CLI
supabase db push
```

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –í—Ä—É—á–Ω—É—é –≤ SQL Editor**
```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø–∞–ø–æ–∫
CREATE TABLE IF NOT EXISTS folders (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è folder_id –≤ —Ç–∞–±–ª–∏—Ü—É —Ñ–∞–π–ª–æ–≤
ALTER TABLE google_drive_files 
ADD COLUMN IF NOT EXISTS folder_id UUID REFERENCES folders(id) ON DELETE SET NULL;

-- –í–∫–ª—é—á–µ–Ω–∏–µ RLS
ALTER TABLE folders ENABLE ROW LEVEL SECURITY;

-- –ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
CREATE POLICY "Users can view their own folders" ON folders
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can create their own folders" ON folders
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own folders" ON folders
  FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can delete their own folders" ON folders
  FOR DELETE USING (auth.uid() = user_id);
```

## **5. üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:**

### **–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å"** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–ü–∞–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–ø–∫–∞–º–∏
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ RLS –ø–æ–ª–∏—Ç–∏–∫–∏

### **–ë–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ):**
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å"** —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ü–∞–ø–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è** –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- ‚ö†Ô∏è **–ù–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è** –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞–º–∏
- ‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏** —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏

## **6. üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**

### **–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞–ø–∫–∏:**
1. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É"**
2. –í–≤–µ–¥–∏—Ç–µ **–Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏**
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **–∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** –¥–ª—è –ª–æ–≥–æ–≤

### **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è**
- ‚úÖ **–ü–∞–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è** –≤ —Å–ø–∏—Å–∫–µ
- ‚úÖ **–í –∫–æ–Ω—Å–æ–ª–∏** —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ

## **üéâ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!**

**–¢–µ–ø–µ—Ä—å –∫–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å" —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ:**
- ‚úÖ **–° –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **–ë–µ–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

**–î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞–ø–æ–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é! üöÄ**
