# Реализация выбора маркетплейсов

## Что было реализовано

### 1. Компонент выбора маркетплейсов (`MarketplaceSelector.tsx`)
- Интерактивный интерфейс с чекбоксами
- Отображение логотипов маркетплейсов
- Показ названия и страны для каждого маркетплейса
- Адаптивный дизайн с hover-эффектами
- Поддержка темной темы

### 2. Интеграция в процесс регистрации
- Добавлен выбор маркетплейсов в форму регистрации
- Сохранение выбранных маркетплейсов при создании аккаунта
- Обновлен `AuthContext` для поддержки передачи предпочтений

### 3. Страница управления в настройках
- Новая вкладка "Маркетплейсы" в настройках
- Возможность изменения выбранных маркетплейсов
- Автоматическое сохранение изменений
- Индикатор успешного сохранения

### 4. База данных и сервисы
- Миграция для таблицы `user_marketplace_preferences`
- Сервис `marketplacePreferencesService` для работы с предпочтениями
- RLS политики для безопасности данных
- Fallback на localStorage для демонстрации

### 5. Иконки и визуальные элементы
- SVG иконки для каждого маркетплейса
- Цветовая схема, соответствующая брендам
- Адаптивные иконки с fallback

## Структура файлов

```
src/
├── components/
│   └── MarketplaceSelector.tsx     # Компонент выбора
├── services/
│   └── marketplacePreferencesService.ts  # Сервис для работы с БД
├── contexts/
│   └── AuthContext.tsx             # Обновлен для поддержки предпочтений
├── pages/
│   └── Settings.tsx                # Добавлена вкладка маркетплейсов
├── types/
│   └── index.ts                    # Добавлен интерфейс MarketplaceInfo
└── constants/
    └── index.ts                    # Константы с информацией о маркетплейсах

public/images/marketplaces/
├── wildberries.svg
├── ozon.svg
├── yandex-market.svg
└── sber-megamarket.svg

supabase/migrations/
└── 20250115000003_create_user_marketplace_preferences.sql
```

## Функциональность

### При регистрации:
1. Пользователь заполняет форму регистрации
2. Выбирает маркетплейсы из списка с логотипами и странами
3. При создании аккаунта предпочтения сохраняются в БД

### В настройках:
1. Пользователь может изменить выбранные маркетплейсы
2. Изменения сохраняются автоматически
3. Показывается индикатор успешного сохранения

### Технические особенности:
- Поддержка как Supabase, так и localStorage (для демонстрации)
- RLS политики для безопасности
- Адаптивный дизайн
- Поддержка темной темы
- Обработка ошибок с fallback

## Будущие улучшения

1. **Международные маркетплейсы**: Легко добавить новые страны и маркетплейсы
2. **Расширенная аналитика**: Использование выбранных маркетплейсов для персонализации
3. **Группировка по регионам**: Организация маркетплейсов по странам
4. **Рекомендации**: Предложения на основе выбранных маркетплейсов
